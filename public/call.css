:root {
  --white: #ffffff; --light-gray: #f3f4f6; --neutral-gray: #6b7280;
  --primary-purple: #7c3aed; --secondary-yellow: #f59e0b;
  --alert-red: #ef4444; --success-green: #10b981;
  --glow: rgba(124, 58, 237, 0.6);
}

body { 
  font-family: 'Poppins', sans-serif; 
  overflow: hidden; 
  margin: 0; 
  color: white; 
}
body.call-active { 
  color: white; 
}

#bg-canvas { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  z-index: -1; 
  filter: blur(1px); /* Reduced blur for perf on mobile */
}

.call-container { 
  min-height: 100vh; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  justify-content: center; 
  text-align: center; 
  padding: 2rem 1rem 8rem 1rem; 
  position: relative; 
  z-index: 1; 
}

.call-status { 
  font-size: 1.1rem; 
  opacity: 0.9; 
  color: var(--neutral-gray); 
  margin-bottom: 1rem; 
  position: absolute; 
  top: -50px; 
  left: 50%; 
  transform: translateX(-50%); 
  width: 100%; 
  transition: all 0.3s ease; 
}
.call-status.connected { 
  color: var(--success-green); 
  font-weight: 600; 
}
.call-status.network-weak { 
  color: var(--alert-red); 
  animation: pulse 1.5s infinite; 
}

@keyframes pulse { 
  0%,100% { opacity: 0.7; } 
  50% { opacity: 1; } 
}

.call-avatar { 
  width: 160px; 
  height: 160px; 
  border-radius: 50%; 
  background: var(--secondary-yellow); 
  color: white; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  font-size: 4rem; 
  font-weight: bold; 
  margin-bottom: 1rem; 
  box-shadow: 0 10px 30px rgba(0,0,0,.4), 0 0 30px var(--glow); 
  position: relative; 
  overflow: hidden; 
  transition: all 0.3s ease; 
}
.call-avatar img { 
  width: 100%; 
  height: 100%; 
  border-radius: 50%; 
  object-fit: cover; 
}
.call-avatar::before { 
  content: ''; 
  position: absolute; 
  top: -12px; 
  left: -12px; 
  right: -12px; 
  bottom: -12px; 
  background: conic-gradient(var(--primary-purple), var(--secondary-yellow), var(--alert-red), var(--primary-purple)); 
  border-radius: 50%; 
  z-index: -1; 
  opacity: 0; 
  transition: opacity 0.4s ease; 
  animation: rotate-gradient 8s linear infinite; 
  animation-play-state: paused; 
}
.call-avatar.ringing::before, 
.call-avatar.connecting::before { 
  opacity: 1; 
  animation-play-state: running; 
}

@keyframes rotate-gradient { 
  0% { transform: rotate(0deg); } 
  100% { transform: rotate(360deg); } 
}

.call-avatar .pulse-ring { 
  position: absolute; 
  top: 50%; 
  left: 50%; 
  width: 100%; 
  height: 100%; 
  border: 3px solid rgba(255,255,255,0.7); 
  border-radius: 50%; 
  transform: translate(-50%,-50%) scale(1); 
  opacity: 0; 
  pointer-events: none; 
  animation: ig-pulse-ring 2s ease-out infinite; 
}
.call-avatar.ringing .pulse-ring, 
.call-avatar.connecting .pulse-ring { 
  animation-play-state: running; 
}
.call-avatar.ringing .pulse-ring:nth-child(2), 
.call-avatar.connecting .pulse-ring:nth-child(2) { 
  animation-delay: 0.7s; 
}
.call-avatar.ringing .pulse-ring:nth-child(3), 
.call-avatar.connecting .pulse-ring:nth-child(3) { 
  animation-delay: 1.4s; 
}

@keyframes ig-pulse-ring { 
  0% { transform: translate(-50%,-50%) scale(0.9); opacity: 0.8; } 
  100% { transform: translate(-50%,-50%) scale(1.8); opacity: 0; } 
}

.call-avatar .sound-wave-bg { 
  position: absolute; 
  top: 50%; 
  left: 50%; 
  width: 120%; 
  height: 120%; 
  transform: translate(-50%,-50%); 
  border-radius: 50%; 
  pointer-events: none; 
  z-index: -1; 
  opacity: 0; 
  transition: opacity 0.3s ease; 
}
.call-avatar.speaking .sound-wave-bg { 
  opacity: 1; 
}
.call-avatar .sound-wave-bg canvas { 
  width: 100%; 
  height: 100%; 
  display: block; 
}

.call-title { 
  font-size: 2rem; 
  font-weight: 600; 
  margin-bottom: .5rem; 
  color: white; 
  text-shadow: 0 2px 4px rgba(0,0,0,.3); 
}

.call-timer { 
  font-size: 1.5rem; 
  font-weight: 500; 
  margin: 1.5rem 0; 
  color: white; 
  text-shadow: 0 1px 2px rgba(0,0,0,.3); 
}

.call-controls { 
  position: fixed; 
  bottom: 2rem; 
  left: 50%; 
  transform: translateX(-50%); 
  display: flex; 
  gap: 1.5rem; 
  z-index: 10; 
}

.call-btn { 
  width: 70px; 
  height: 70px; 
  border-radius: 50%; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  transition: all .3s ease; 
  border: none; 
  cursor: pointer; 
  font-size: 1.75rem; 
  box-shadow: 0 8px 20px rgba(0,0,0,.4); 
  position: relative; 
  color: white; 
  backdrop-filter: blur(12px); 
  background: rgba(255,255,255,.1); 
}
.call-btn::before { 
  content: ''; 
  position: absolute; 
  inset: 0; 
  border-radius: 50%; 
  background: rgba(255,255,255,0.15); 
  opacity: 0; 
  transition: opacity 0.3s; 
}
.call-btn:active::before { 
  opacity: 1; 
}

.call-btn.accept { 
  background: linear-gradient(135deg, #10b981, #059669); 
}
.call-btn.decline, 
.call-btn.end { 
  background: linear-gradient(135deg, #ef4444, #dc2626); 
}
.call-btn.mute { 
  background: linear-gradient(135deg, #6b7280, #4b5563); 
}
.call-btn.speaker { 
  background: linear-gradient(135deg, #6366f1, #4f46e5); 
}
.call-btn.retry { 
  background: linear-gradient(135deg, #7c3aed, #6d28d9); 
}

.call-btn:hover { 
  transform: scale(1.15); 
  box-shadow: 0 12px 30px rgba(0,0,0,.5); 
}

.call-btn.muted { 
  background: linear-gradient(135deg, #ef4444, #dc2626); 
}
.call-btn.speaking, 
.call-btn.listening { 
  background: linear-gradient(135deg, #10b981, #059669); 
  animation: btn-glow 1.5s ease-in-out infinite; 
}

@keyframes btn-glow { 
  0%,100% { box-shadow: 0 0 15px rgba(16,185,129,.6); } 
  50% { box-shadow: 0 0 30px rgba(16,185,129,.9); } 
}

.back-btn { 
  position: fixed; 
  top: 1rem; 
  left: 1rem; 
  z-index: 50; 
  background: rgba(255,255,255,.2); 
  color: white; 
  width: 44px; 
  height: 44px; 
  border-radius: 50%; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  backdrop-filter: blur(8px); 
  transition: all 0.3s; 
}
.back-btn:hover { 
  background: rgba(255,255,255,.3); 
}

.loading-spinner { 
  border: 4px solid var(--light-gray); 
  border-top: 4px solid var(--primary-purple); 
  border-radius: 50%; 
  width: 40px; 
  height: 40px; 
  animation: spin 1s linear infinite; 
  margin: 1rem auto; 
}

@keyframes spin { 
  0% { transform: rotate(0deg); } 
  100% { transform: rotate(360deg); } 
}

.network-indicator { 
  position: fixed; 
  top: 1rem; 
  right: 1rem; 
  z-index: 50; 
  padding: 0.5rem 1rem; 
  background: rgba(255,255,255,.2); 
  border-radius: 20px; 
  font-size: 0.8rem; 
  color: white; 
  backdrop-filter: blur(8px); 
  display: flex; 
  align-items: center; 
  gap: .5rem; 
}
.network-indicator::before { 
  content: ''; 
  width: 10px; 
  height: 10px; 
  border-radius: 50%; 
  background: #ef4444; 
  animation: blink 1.5s infinite; 
}
.network-indicator.connected::before { 
  background: #10b981; 
  animation: none; 
}

@keyframes blink { 
  0%,100% { opacity: 0.4; } 
  50% { opacity: 1; } 
}

.sound-wave { 
  position: absolute; 
  top: -20px; 
  right: -20px; 
  width: 110px; 
  height: 110px; 
  pointer-events: none; 
}

.debug-info { 
  position: fixed; 
  bottom: 100px; 
  left: 50%; 
  transform: translateX(-50%); 
  background: rgba(0,0,0,0.7); 
  color: #0f0; 
  padding: 8px 16px; 
  border-radius: 8px; 
  font-family: monospace; 
  font-size: 0.9rem; 
  z-index: 100; 
  display: none; 
}

.reconnect-info { 
  position: fixed; 
  top: 50%; 
  left: 50%; 
  transform: translate(-50%, -50%); 
  background: rgba(0,0,0,0.8); 
  color: white; 
  padding: 1rem 2rem; 
  border-radius: 12px; 
  font-size: 1.1rem; 
  z-index: 200; 
  display: none; 
  text-align: center; 
}

@media (max-width: 640px) { 
  .call-container { 
    padding: 2rem 1rem 6rem 1rem; 
  }
  .call-btn { 
    width: 60px; 
    height: 60px; 
    font-size: 1.5rem; 
  } 
  .call-controls { 
    gap: 1rem; 
  } 
  .call-avatar { 
    width: 120px; 
    height: 120px; 
    font-size: 3rem; 
  } 
  .sound-wave { 
    width: 90px; 
    height: 90px; 
  } 
  .call-title { 
    font-size: 1.75rem; 
  }
  .call-status { 
    font-size: 1rem; 
    top: -40px; 
  }
}